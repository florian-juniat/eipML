{"ast":null,"code":"var _jsxFileName = \"/home/flo/HeriotWatt/E-commerce/CW/ecomm/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport { CssBaseline } from '@material-ui/core';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport { Navbar, Products, Cart, Checkout } from './components';\nimport { commerce } from './lib/commerce';\nimport SignUp from './components/Sign/SignUp';\nimport SignIn from './components/Sign/SignIn';\n\nconst App = () => {\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState({});\n  const [order, setOrder] = useState({});\n  const [errorMessage, setErrorMessage] = useState('');\n  const [token, setToken] = useState(\"\");\n\n  const fetchProducts = async () => {\n    const {\n      data\n    } = await commerce.products.list();\n    setProducts(data);\n  };\n\n  const fetchCart = async () => {\n    setCart(await commerce.cart.retrieve());\n  };\n\n  const handleAddToCart = async (productId, quantity) => {\n    const item = await commerce.cart.add(productId, quantity);\n    setCart(item.cart);\n  };\n\n  const handleUpdateCartQty = async (lineItemId, quantity) => {\n    const response = await commerce.cart.update(lineItemId, {\n      quantity\n    });\n    setCart(response.cart);\n  };\n\n  const handleRemoveFromCart = async lineItemId => {\n    const response = await commerce.cart.remove(lineItemId);\n    setCart(response.cart);\n  };\n\n  const handleEmptyCart = async () => {\n    const response = await commerce.cart.empty();\n    setCart(response.cart);\n  };\n\n  const refreshCart = async () => {\n    const newCart = await commerce.cart.refresh();\n    setCart(newCart);\n  };\n\n  const handleCaptureCheckout = async (checkoutTokenId, newOrder) => {\n    try {\n      const incomingOrder = await commerce.checkout.capture(checkoutTokenId, newOrder);\n      setOrder(incomingOrder);\n      refreshCart();\n    } catch (error) {\n      setErrorMessage(error.data.error.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts();\n    fetchCart();\n  }, []);\n\n  const handleDrawerToggle = () => setMobileOpen(!mobileOpen);\n  /*\n   <Switch>\n          \n          <Route exact path=\"/ecomm\">\n            <Products products={products} onAddToCart={handleAddToCart} handleUpdateCartQty />\n          </Route>\n          <Route exact path=\"/signup\">\n            <SignUp />\n          </Route>\n          <Route exact path=\"/signin\">\n            <SignIn />\n          </Route>\n          <Route exact path=\"/cart\">\n            <Cart cart={cart} onUpdateCartQty={handleUpdateCartQty} onRemoveFromCart={handleRemoveFromCart} onEmptyCart={handleEmptyCart} />\n          </Route>\n          <Route path=\"/checkout\" exact>\n            <Checkout cart={cart} order={order} onCaptureCheckout={handleCaptureCheckout} error={errorMessage} />\n          </Route>\n        </Switch>\n        */\n\n\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Navbar, {\n    totalItems: cart.total_items,\n    handleDrawerToggle: handleDrawerToggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }), token == \"\" ? /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SignUp, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SignIn, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }))) : /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/ecomm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Products, {\n    products: products,\n    onAddToCart: handleAddToCart,\n    handleUpdateCartQty: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Cart, {\n    cart: cart,\n    onUpdateCartQty: handleUpdateCartQty,\n    onRemoveFromCart: handleRemoveFromCart,\n    onEmptyCart: handleEmptyCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/checkout\",\n    exact: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Checkout, {\n    cart: cart,\n    order: order,\n    onCaptureCheckout: handleCaptureCheckout,\n    error: errorMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/flo/HeriotWatt/E-commerce/CW/ecomm/src/App.js"],"names":["React","useState","useEffect","CssBaseline","BrowserRouter","Router","Switch","Route","Navbar","Products","Cart","Checkout","commerce","SignUp","SignIn","App","mobileOpen","setMobileOpen","products","setProducts","cart","setCart","order","setOrder","errorMessage","setErrorMessage","token","setToken","fetchProducts","data","list","fetchCart","retrieve","handleAddToCart","productId","quantity","item","add","handleUpdateCartQty","lineItemId","response","update","handleRemoveFromCart","remove","handleEmptyCart","empty","refreshCart","newCart","refresh","handleCaptureCheckout","checkoutTokenId","newOrder","incomingOrder","checkout","capture","error","message","handleDrawerToggle","display","total_items"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { CssBaseline } from '@material-ui/core';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport { Navbar, Products, Cart, Checkout } from './components';\nimport { commerce } from './lib/commerce';\n\nimport SignUp from './components/Sign/SignUp'\nimport SignIn from './components/Sign/SignIn'\n\nconst App = () => {\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState({});\n  const [order, setOrder] = useState({});\n  const [errorMessage, setErrorMessage] = useState('');\n  const [token, setToken] = useState(\"\")\n\n  const fetchProducts = async () => {\n    const { data } = await commerce.products.list();\n    setProducts(data);\n  };\n\n  const fetchCart = async () => {\n    setCart(await commerce.cart.retrieve());\n  };\n\n  const handleAddToCart = async (productId, quantity) => {\n    const item = await commerce.cart.add(productId, quantity);\n\n    setCart(item.cart);\n  };\n\n  const handleUpdateCartQty = async (lineItemId, quantity) => {\n    const response = await commerce.cart.update(lineItemId, { quantity });\n\n    setCart(response.cart);\n  };\n\n  const handleRemoveFromCart = async (lineItemId) => {\n    const response = await commerce.cart.remove(lineItemId);\n\n    setCart(response.cart);\n  };\n\n  const handleEmptyCart = async () => {\n    const response = await commerce.cart.empty();\n\n    setCart(response.cart);\n  };\n\n  const refreshCart = async () => {\n    const newCart = await commerce.cart.refresh();\n\n    setCart(newCart);\n  };\n\n  const handleCaptureCheckout = async (checkoutTokenId, newOrder) => {\n    try {\n      const incomingOrder = await commerce.checkout.capture(checkoutTokenId, newOrder);\n\n      setOrder(incomingOrder);\n\n      refreshCart();\n    } catch (error) {\n      setErrorMessage(error.data.error.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts();\n    fetchCart();\n  }, []);\n\n  const handleDrawerToggle = () => setMobileOpen(!mobileOpen);\n\n  /*\n\n  <Switch>\n          \n          <Route exact path=\"/ecomm\">\n            <Products products={products} onAddToCart={handleAddToCart} handleUpdateCartQty />\n          </Route>\n          <Route exact path=\"/signup\">\n            <SignUp />\n          </Route>\n          <Route exact path=\"/signin\">\n            <SignIn />\n          </Route>\n          <Route exact path=\"/cart\">\n            <Cart cart={cart} onUpdateCartQty={handleUpdateCartQty} onRemoveFromCart={handleRemoveFromCart} onEmptyCart={handleEmptyCart} />\n          </Route>\n          <Route path=\"/checkout\" exact>\n            <Checkout cart={cart} order={order} onCaptureCheckout={handleCaptureCheckout} error={errorMessage} />\n          </Route>\n        </Switch>\n        */\n\n  return (\n    <Router>\n      <div style={{ display: 'flex' }}>\n        <CssBaseline />\n        <Navbar totalItems={cart.total_items} handleDrawerToggle={handleDrawerToggle} />\n        {token == \"\" ? \n        <Switch>\n          <Route exact path=\"/signup\">\n            <SignUp />\n          </Route>\n          <Route exact path=\"/signin\">\n            <SignIn />\n          </Route>\n        </Switch>\n        \n        :\n        \n        <Switch>\n          <Route exact path=\"/ecomm\">\n            <Products products={products} onAddToCart={handleAddToCart} handleUpdateCartQty />\n          </Route>\n          <Route exact path=\"/cart\">\n            <Cart cart={cart} onUpdateCartQty={handleUpdateCartQty} onRemoveFromCart={handleRemoveFromCart} onEmptyCart={handleEmptyCart} />\n          </Route>\n          <Route path=\"/checkout\" exact>\n            <Checkout cart={cart} order={order} onCaptureCheckout={handleCaptureCheckout} error={errorMessage} />\n          </Route>\n        </Switch>\n\n        }\n        \n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}