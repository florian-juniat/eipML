{"ast":null,"code":"var _jsxFileName = \"/home/flo/HeriotWatt/E-commerce/CW/ecomm/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport { CssBaseline } from '@material-ui/core';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport { Navbar, Products, Cart, Checkout } from './components';\nimport { commerce } from './lib/commerce';\nimport SignUp from './components/Sign/SignUp';\nimport SignIn from './components/Sign/SignIn';\nimport PrivateRoute from './components/Private/Privateroute';\n\nconst App = () => {\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState({});\n  const [order, setOrder] = useState({});\n  const [errorMessage, setErrorMessage] = useState('');\n  const [token, setToken] = useState(\"\");\n  const [totalItem, setTotalItem] = useState(0);\n\n  const fetchProducts = async () => {\n    const {\n      data\n    } = await commerce.products.list();\n    setProducts(data);\n  };\n\n  const fetchCart = async () => {\n    setCart(await commerce.cart.retrieve());\n  };\n\n  const handleAddToCart = async (productId, quantity) => {\n    const item = await commerce.cart.add(productId, quantity);\n    setCart(item.cart);\n  };\n\n  const handleUpdateCartQty = async (lineItemId, quantity) => {\n    const response = await commerce.cart.update(lineItemId, {\n      quantity\n    });\n    setCart(response.cart);\n  };\n\n  const handleRemoveFromCart = async lineItemId => {\n    const response = await commerce.cart.remove(lineItemId);\n    setCart(response.cart);\n  };\n\n  const handleEmptyCart = async () => {\n    const response = await commerce.cart.empty();\n    setCart(response.cart);\n  };\n\n  const refreshCart = async () => {\n    const newCart = await commerce.cart.refresh();\n    setCart(newCart);\n  };\n\n  const handleCaptureCheckout = async (checkoutTokenId, newOrder) => {\n    try {\n      const incomingOrder = await commerce.checkout.capture(checkoutTokenId, newOrder);\n      setOrder(incomingOrder);\n      refreshCart();\n    } catch (error) {\n      setErrorMessage(error.data.error.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts();\n    fetchCart();\n  }, []);\n\n  const handleDrawerToggle = () => setMobileOpen(!mobileOpen);\n  /*\n   <Switch>\n          \n          <Route exact path=\"/ecomm\">\n            <Products products={products} onAddToCart={handleAddToCart} handleUpdateCartQty />\n          </Route>\n          <Route exact path=\"/signup\">\n            <SignUp />\n          </Route>\n          <Route exact path=\"/signin\">\n            <SignIn />\n          </Route>\n          <Route exact path=\"/cart\">\n            <Cart cart={cart} onUpdateCartQty={handleUpdateCartQty} onRemoveFromCart={handleRemoveFromCart} onEmptyCart={handleEmptyCart} />\n          </Route>\n          <Route path=\"/checkout\" exact>\n            <Checkout cart={cart} order={order} onCaptureCheckout={handleCaptureCheckout} error={errorMessage} />\n          </Route>\n        </Switch>\n        */\n\n\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Navbar, {\n    totalItems: totalItem,\n    handleDrawerToggle: handleDrawerToggle,\n    token: token,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/ecomm/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SignUp, {\n    setToken: setToken,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/ecomm/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SignIn, {\n    setToken: setToken,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    token: token,\n    exact: true,\n    path: \"/ecomm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Products, {\n    setTotalItem: setTotalItem,\n    token: token,\n    products: products,\n    onAddToCart: handleAddToCart,\n    handleUpdateCartQty: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    token: token,\n    exact: true,\n    path: \"/ecomm/cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Cart, {\n    totalItem: totalItem,\n    setTotalItem: setTotalItem,\n    token: token,\n    cart: cart,\n    onUpdateCartQty: handleUpdateCartQty,\n    onRemoveFromCart: handleRemoveFromCart,\n    onEmptyCart: handleEmptyCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/flo/HeriotWatt/E-commerce/CW/ecomm/src/App.js"],"names":["React","useState","useEffect","CssBaseline","BrowserRouter","Router","Switch","Route","Navbar","Products","Cart","Checkout","commerce","SignUp","SignIn","PrivateRoute","App","mobileOpen","setMobileOpen","products","setProducts","cart","setCart","order","setOrder","errorMessage","setErrorMessage","token","setToken","totalItem","setTotalItem","fetchProducts","data","list","fetchCart","retrieve","handleAddToCart","productId","quantity","item","add","handleUpdateCartQty","lineItemId","response","update","handleRemoveFromCart","remove","handleEmptyCart","empty","refreshCart","newCart","refresh","handleCaptureCheckout","checkoutTokenId","newOrder","incomingOrder","checkout","capture","error","message","handleDrawerToggle","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { CssBaseline } from '@material-ui/core';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport { Navbar, Products, Cart, Checkout } from './components';\nimport { commerce } from './lib/commerce';\n\nimport SignUp from './components/Sign/SignUp'\nimport SignIn from './components/Sign/SignIn'\nimport PrivateRoute from './components/Private/Privateroute'\n\nconst App = () => {\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState({});\n  const [order, setOrder] = useState({});\n  const [errorMessage, setErrorMessage] = useState('');\n  const [token, setToken] = useState(\"\")\n  const [totalItem, setTotalItem] = useState(0)\n\n  const fetchProducts = async () => {\n    const { data } = await commerce.products.list();\n    setProducts(data);\n  };\n\n  const fetchCart = async () => {\n    setCart(await commerce.cart.retrieve());\n  };\n\n  const handleAddToCart = async (productId, quantity) => {\n    const item = await commerce.cart.add(productId, quantity);\n\n    setCart(item.cart);\n  };\n\n  const handleUpdateCartQty = async (lineItemId, quantity) => {\n    const response = await commerce.cart.update(lineItemId, { quantity });\n\n    setCart(response.cart);\n  };\n\n  const handleRemoveFromCart = async (lineItemId) => {\n    const response = await commerce.cart.remove(lineItemId);\n\n    setCart(response.cart);\n  };\n\n  const handleEmptyCart = async () => {\n    const response = await commerce.cart.empty();\n\n    setCart(response.cart);\n  };\n\n  const refreshCart = async () => {\n    const newCart = await commerce.cart.refresh();\n\n    setCart(newCart);\n  };\n\n  const handleCaptureCheckout = async (checkoutTokenId, newOrder) => {\n    try {\n      const incomingOrder = await commerce.checkout.capture(checkoutTokenId, newOrder);\n\n      setOrder(incomingOrder);\n\n      refreshCart();\n    } catch (error) {\n      setErrorMessage(error.data.error.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts();\n    fetchCart();\n  }, []);\n\n  const handleDrawerToggle = () => setMobileOpen(!mobileOpen);\n\n  /*\n\n  <Switch>\n          \n          <Route exact path=\"/ecomm\">\n            <Products products={products} onAddToCart={handleAddToCart} handleUpdateCartQty />\n          </Route>\n          <Route exact path=\"/signup\">\n            <SignUp />\n          </Route>\n          <Route exact path=\"/signin\">\n            <SignIn />\n          </Route>\n          <Route exact path=\"/cart\">\n            <Cart cart={cart} onUpdateCartQty={handleUpdateCartQty} onRemoveFromCart={handleRemoveFromCart} onEmptyCart={handleEmptyCart} />\n          </Route>\n          <Route path=\"/checkout\" exact>\n            <Checkout cart={cart} order={order} onCaptureCheckout={handleCaptureCheckout} error={errorMessage} />\n          </Route>\n        </Switch>\n        */\n\n  return (\n    <Router>\n      <div style={{ display: 'flex' }}>\n        <CssBaseline />\n        <Navbar totalItems={totalItem} handleDrawerToggle={handleDrawerToggle} token={token} />\n        <Switch>\n\n          <Route exact path=\"/ecomm/signup\">\n            <SignUp setToken={setToken}/>\n          </Route>\n          <Route exact path=\"/ecomm/signin\">\n            <SignIn setToken={setToken}/>\n          </Route>\n          \n          <Route token={token} exact path=\"/ecomm\">\n            <Products setTotalItem={setTotalItem} token={token} products={products} onAddToCart={handleAddToCart} handleUpdateCartQty />\n          </Route>\n          \n          <Route token={token} exact path=\"/ecomm/cart\">\n            <Cart totalItem={totalItem} setTotalItem={setTotalItem} token={token} cart={cart} onUpdateCartQty={handleUpdateCartQty} onRemoveFromCart={handleRemoveFromCart} onEmptyCart={handleEmptyCart} />\n          </Route>\n        </Switch>\n        \n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}