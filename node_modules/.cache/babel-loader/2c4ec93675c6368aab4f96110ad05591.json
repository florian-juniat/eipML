{"ast":null,"code":"var _jsxFileName = \"/home/flo/HeriotWatt/E-commerce/CW/ecomm/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport { CssBaseline } from '@material-ui/core';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport { Navbar, Products, Cart, Checkout } from './components';\nimport { commerce } from './lib/commerce';\n\nconst App = () => {\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState({});\n  const [order, setOrder] = useState({});\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const fetchProducts = async () => {\n    const {\n      data\n    } = await commerce.products.list();\n    console.log(\"====TEST=====\");\n    setProducts(data);\n  };\n\n  const fetchCart = async () => {\n    setCart(await commerce.cart.retrieve());\n  };\n\n  const handleAddToCart = async (productId, quantity) => {\n    const item = await commerce.cart.add(productId, quantity);\n    setCart(item.cart);\n  };\n\n  const handleUpdateCartQty = async (lineItemId, quantity) => {\n    const response = await commerce.cart.update(lineItemId, {\n      quantity\n    });\n    setCart(response.cart);\n  };\n\n  const handleRemoveFromCart = async lineItemId => {\n    const response = await commerce.cart.remove(lineItemId);\n    setCart(response.cart);\n  };\n\n  const handleEmptyCart = async () => {\n    const response = await commerce.cart.empty();\n    setCart(response.cart);\n  };\n\n  const refreshCart = async () => {\n    const newCart = await commerce.cart.refresh();\n    setCart(newCart);\n  };\n\n  const handleCaptureCheckout = async (checkoutTokenId, newOrder) => {\n    try {\n      const incomingOrder = await commerce.checkout.capture(checkoutTokenId, newOrder);\n      setOrder(incomingOrder);\n      refreshCart();\n    } catch (error) {\n      setErrorMessage(error.data.error.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts();\n    fetchCart();\n  }, []);\n\n  const handleDrawerToggle = () => setMobileOpen(!mobileOpen);\n\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Navbar, {\n    totalItems: cart.total_items,\n    handleDrawerToggle: handleDrawerToggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Products, {\n    products: products,\n    onAddToCart: handleAddToCart,\n    handleUpdateCartQty: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Cart, {\n    cart: cart,\n    onUpdateCartQty: handleUpdateCartQty,\n    onRemoveFromCart: handleRemoveFromCart,\n    onEmptyCart: handleEmptyCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/checkout\",\n    exact: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Checkout, {\n    cart: cart,\n    order: order,\n    onCaptureCheckout: handleCaptureCheckout,\n    error: errorMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/flo/HeriotWatt/E-commerce/CW/ecomm/src/App.js"],"names":["React","useState","useEffect","CssBaseline","BrowserRouter","Router","Switch","Route","Navbar","Products","Cart","Checkout","commerce","App","mobileOpen","setMobileOpen","products","setProducts","cart","setCart","order","setOrder","errorMessage","setErrorMessage","fetchProducts","data","list","console","log","fetchCart","retrieve","handleAddToCart","productId","quantity","item","add","handleUpdateCartQty","lineItemId","response","update","handleRemoveFromCart","remove","handleEmptyCart","empty","refreshCart","newCart","refresh","handleCaptureCheckout","checkoutTokenId","newOrder","incomingOrder","checkout","capture","error","message","handleDrawerToggle","display","total_items"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { CssBaseline } from '@material-ui/core';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport { Navbar, Products, Cart, Checkout } from './components';\nimport { commerce } from './lib/commerce';\n\nconst App = () => {\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState({});\n  const [order, setOrder] = useState({});\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const fetchProducts = async () => {\n    const { data } = await commerce.products.list();\n\n    console.log(\"====TEST=====\")\n    setProducts(data);\n  };\n\n  const fetchCart = async () => {\n    setCart(await commerce.cart.retrieve());\n  };\n\n  const handleAddToCart = async (productId, quantity) => {\n    const item = await commerce.cart.add(productId, quantity);\n\n    setCart(item.cart);\n  };\n\n  const handleUpdateCartQty = async (lineItemId, quantity) => {\n    const response = await commerce.cart.update(lineItemId, { quantity });\n\n    setCart(response.cart);\n  };\n\n  const handleRemoveFromCart = async (lineItemId) => {\n    const response = await commerce.cart.remove(lineItemId);\n\n    setCart(response.cart);\n  };\n\n  const handleEmptyCart = async () => {\n    const response = await commerce.cart.empty();\n\n    setCart(response.cart);\n  };\n\n  const refreshCart = async () => {\n    const newCart = await commerce.cart.refresh();\n\n    setCart(newCart);\n  };\n\n  const handleCaptureCheckout = async (checkoutTokenId, newOrder) => {\n    try {\n      const incomingOrder = await commerce.checkout.capture(checkoutTokenId, newOrder);\n\n      setOrder(incomingOrder);\n\n      refreshCart();\n    } catch (error) {\n      setErrorMessage(error.data.error.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts();\n    fetchCart();\n  }, []);\n\n  const handleDrawerToggle = () => setMobileOpen(!mobileOpen);\n\n  return (\n    <Router>\n      <div style={{ display: 'flex' }}>\n        <CssBaseline />\n        <Navbar totalItems={cart.total_items} handleDrawerToggle={handleDrawerToggle} />\n        <Switch>\n          <Route exact path=\"/\">\n            <Products products={products} onAddToCart={handleAddToCart} handleUpdateCartQty />\n          </Route>\n          <Route exact path=\"/cart\">\n            <Cart cart={cart} onUpdateCartQty={handleUpdateCartQty} onRemoveFromCart={handleRemoveFromCart} onEmptyCart={handleEmptyCart} />\n          </Route>\n          <Route path=\"/checkout\" exact>\n            <Checkout cart={cart} order={order} onCaptureCheckout={handleCaptureCheckout} error={errorMessage} />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}